{% extends "./main.html" %}

{% block content %}
    <section class="content">
        <div class="container-fluid">
            {{ include('./pages/partials/header_page.html') }}

			{% if success is defined %}
				{% if success %}
					{{ include('./pages/partials/panel_success_delete.html') }}
				{% else %}
					{{ include('./pages/partials/panel_error_delete.html') }}
				{% endif %}
			{% endif %}

			<div class="row">
				<div class="col-lg-12 buttons-margin view-header">
					<a href="/{{ table }}/new" class="btn btn-w-md btn-primary pull-right">Create New</a>
				</div>
			</div>

			{% if records['records'] %}
				<div class="row table-responsive">
					<table class="table table-hover table-striped">
						<tr>
							<th>Id</th>
							{% for column in fields %}
								<th>{{ column.label }}</th>
							{% endfor %}
							<th></th>
							<th></th>
						</tr>

						{% for record in records['records'] %}
							<tr>
								<td>{{ record.id }}</td>
								{% for column in fields %}
									<td>{{ attribute(record, column.field) }}</td>
								{% endfor %}
								<td>
									<a href="/{{ table }}/{{ record.id }}/edit"><i class="pe-7s-note2 text-info" style="font-size: 24px"></i></a>
								</td>
								<td>
									<a href="#" class="btn-confirm-delete" data-link="/{{ table }}/{{ record.id }}/delete" data-toggle="modal" data-target="#model-confirm-delete">
										<i class="pe-7s-trash text-danger" style="font-size: 24px"></i>
									</a>
								</td>
							</tr>
						{% endfor %}
					</table>
				</div>

				{{ include('./pages/partials/pagination.html') }}

			</div>
		{% else %}
			<div class="panel-body">
				No records found.
			</div>
		{% endif %}
		{{ include('./pages/partials/confirm_modal.html') }}
	</section>
{% endblock content %}
